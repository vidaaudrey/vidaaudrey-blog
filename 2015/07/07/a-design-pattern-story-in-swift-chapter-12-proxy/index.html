<!DOCTYPE html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>A Design Pattern Story in Swift – Chapter 12: Proxy</title><meta name=description content="Life is too short to do everything by ourselves, so we often let others do things for us. When the good people of the village need their own cat pets, they g..."><link rel=canonical href=http://audreyli.me/2015/07/07/a-design-pattern-story-in-swift-chapter-12-proxy/ ><link rel=stylesheet href="http://fonts.googleapis.com/css?family=RobotoDraft:100,300,400|Roboto:300,300italic,400"><link rel=stylesheet href=https://cdn.rawgit.com/twbs/bootstrap/v4-dev/dist/css/bootstrap.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css><link rel=stylesheet href=/assets/stylesheets/style-2e5eb4c593.min.css><link rel="shortcut icon" href=/assets/favicon.ico><link rel=apple-touch-icon sizes=57x57 href=/assets/images/favicons/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/assets/images/favicons/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/assets/images/favicons/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/assets/images/favicons/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/assets/images/favicons/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/assets/images/favicons/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/assets/images/favicons/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/assets/images/favicons/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/assets/images/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png href=/assets/images/favicons/favicon-32x32.png sizes=32x32><link type=application/atom+xml rel=alternate href=http://audreyli.me/feed.xml title=vidaaudrey-blog></head><body><nav id=push_sidebar><div class=social-icons><img src=/assets/images/audrey-li.jpg alt="Audrey's Photo" class=img-circle> <a href=https://github.com/vidaaudrey title="Audrey's Github"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span></a><a href=https://www.facebook.com/audreyauli title="Audrey's Facebook"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i> </span></a><a href=https://www.linkedin.com/in/audreyauli title="Audrey's Google Plus"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span></a><a href=/assets/images/wechat.jpg title="Audrey's Wechat"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-weixin fa-stack-1x fa-inverse"></i></span></a></div><ul><li><a href=/ >Home</a></li><li><a href=/portfolio>Portfolio</a></li><li><a href=/archives>Archives</a></li><li><a href=/feed.xml>Feed</a></li><li><a href=/about>About</a></li></ul></nav><div id=body-wrap><header class=nav-down id=wrapper><div class=container-fluid><a class=navbar-brand href=/ ><img alt=Brand src=/assets/images/normal/logo-dark-round.png></a><span class=nav_trigger><i class="fa fa-bars"></i></span></div></header><div class="jumbotron jumbotron-post" style="background-image: url('/assets/images/wp-content/uploads/2015/07/cats.jpg')"><div class=fullwidth-wrapper><div class="col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-12"><div class=main-wrap><h2 class=post-title>A Design Pattern Story in Swift – Chapter 12: Proxy</h2><p class=post-date>07 Jul 2015</p></div></div></div></div><main class=row><div class="col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-12"><div class=main-wrap><div class="post card post-content"><p>Life is too short to do everything by ourselves, so we often let others do things for us.</p><p>When the good people of the village need their own cat pets, they go to different proxies. The proxies would then do some god-knows-what kind of trick and get the villagers some cats.</p><p>First, it&#8217;s the entry-level Simple Cat Proxy called &#8211; &#8220;SimpleCatRequestProxy&#8221;. You request a cat and he&#8217;ll get a cat from the remote cat house.</p><figure class=highlight><pre><code class=language-swift data-lang=swift><span class=k>protocol</span> <span class=n>SimpleCatRequest</span> <span class=p>{</span>
    <span class=k>func</span> <span class=n>getCat</span><span class=p>(</span><span class=nl>url</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span> <span class=nl>name</span><span class=p>:</span> <span class=n>String</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Cat</span><span class=o>?</span>
<span class=p>}</span>

<span class=c1>//: Use CatRequestProxy to get cat photo from a remote place</span>
<span class=k>class</span> <span class=nl>SimpleCatRequestProxy</span><span class=p>:</span> <span class=n>SimpleCatRequest</span> <span class=p>{</span>
    <span class=n>private</span> <span class=k>let</span> <span class=n>semaphore</span> <span class=o>=</span> <span class=n>dispatch_semaphore_create</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
    <span class=k>func</span> <span class=n>getCat</span><span class=p>(</span><span class=nl>url</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span> <span class=nl>name</span><span class=p>:</span> <span class=n>String</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Cat</span><span class=o>?</span> <span class=p>{</span>
        <span class=n>print</span><span class=p>(</span><span class=s>&quot;Trying to get \(name) from the SimpleCatProxy&quot;</span><span class=p>)</span>
        <span class=k>var</span> <span class=nl>cat</span><span class=p>:</span> <span class=n>Cat</span><span class=o>?</span>
        <span class=n>guard</span> <span class=k>let</span> <span class=nl>url</span><span class=p>:</span> <span class=bp>NSURL</span> <span class=o>=</span> <span class=bp>NSURL</span><span class=p>(</span><span class=nl>string</span><span class=p>:</span><span class=n>url</span><span class=p>)</span> <span class=k>else</span> <span class=p>{</span> <span class=k>return</span> <span class=nb>nil</span> <span class=p>}</span>
        <span class=k>let</span> <span class=n>task</span> <span class=o>=</span> <span class=bp>NSURLSession</span><span class=p>.</span><span class=n>sharedSession</span><span class=p>().</span><span class=n>dataTaskWithURL</span><span class=p>(</span><span class=n>url</span><span class=p>)</span> <span class=p>{</span>
            <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>_</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Void</span> <span class=k>in</span>
            <span class=n>cat</span> <span class=o>=</span> <span class=n>Cat</span><span class=p>(</span><span class=nl>name</span><span class=p>:</span> <span class=n>name</span><span class=p>,</span> <span class=nl>image</span><span class=p>:</span> <span class=bp>UIImage</span><span class=p>(</span><span class=nl>data</span><span class=p>:</span> <span class=n>data</span><span class=o>!</span><span class=p>))</span>
            <span class=n>print</span><span class=p>(</span><span class=s>&quot;Got \(name) from remote </span><span class=se>\n</span><span class=s>&quot;</span><span class=p>)</span>
            <span class=n>dispatch_semaphore_signal</span><span class=p>(</span><span class=nb>self</span><span class=p>.</span><span class=n>semaphore</span><span class=p>)</span>
        <span class=p>}</span>
        <span class=n>task</span><span class=o>?</span><span class=p>.</span><span class=n>resume</span><span class=p>()</span>
        <span class=n>dispatch_semaphore_wait</span><span class=p>(</span><span class=nb>self</span><span class=p>.</span><span class=n>semaphore</span><span class=p>,</span> <span class=n>DISPATCH_TIME_FOREVER</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>cat</span>
    <span class=p>}</span>
<span class=p>}</span>
<span class=c1>//: Creating the proxy and get a cat from the proxy</span>
<span class=k>let</span> <span class=n>simpleCatProxy</span> <span class=o>=</span> <span class=n>SimpleCatRequestProxy</span><span class=p>()</span>
<span class=k>let</span> <span class=n>cat</span> <span class=o>=</span> <span class=n>simpleCatProxy</span><span class=p>.</span><span class=n>getCat</span><span class=p>(</span><span class=n>Config</span><span class=p>.</span><span class=n>RandomCatURL</span><span class=p>,</span> <span class=nl>name</span><span class=p>:</span> <span class=s>&quot;Cat Ada&quot;</span><span class=p>)</span>
<span class=n>cat</span><span class=o>?</span><span class=p>.</span><span class=n>view</span></code></pre></figure><p><a href=/assets/images/wp-content/uploads/2015/07/remote.png><img class="aligncenter size-full wp-image-1030" src=/assets/images/wp-content/uploads/2015/07/remote.png alt=remote width=744 height=298></a>The next is the Clone (cache) Cat Proxy. He will create a local clone once he got a cat from the remote cat house. When others request the cat, he will first look at his cloned list. If the clone exists, he will return a clone. If not, he will get the cat from the remote cat house.</p><figure class=highlight><pre><code class=language-swift data-lang=swift><span class=k>class</span> <span class=nl>ClonedCatRequestProxy</span><span class=p>:</span> <span class=n>SimpleCatRequest</span> <span class=p>{</span>
    <span class=n>private</span> <span class=k>let</span> <span class=n>semaphore</span> <span class=o>=</span> <span class=n>dispatch_semaphore_create</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
    <span class=n>private</span> <span class=k>let</span> <span class=n>queue</span> <span class=o>=</span> <span class=n>dispatch_queue_create</span><span class=p>(</span><span class=s>&quot;remoteCatQ&quot;</span><span class=p>,</span> <span class=n>DISPATCH_QUEUE_SERIAL</span><span class=p>)</span>
    <span class=n>private</span> <span class=k>var</span> <span class=nl>clonedCats</span><span class=p>:[</span><span class=nl>String</span> <span class=p>:</span> <span class=n>Cat</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=o>:</span><span class=p>]</span>
    
    <span class=k>func</span> <span class=n>getCat</span><span class=p>(</span><span class=nl>url</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span> <span class=nl>name</span><span class=p>:</span> <span class=n>String</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Cat</span><span class=o>?</span> <span class=p>{</span>
        <span class=n>print</span><span class=p>(</span><span class=s>&quot;Trying to get \(name) from the ClonedCatProxy&quot;</span><span class=p>)</span>
        <span class=k>var</span> <span class=nl>cat</span><span class=p>:</span> <span class=n>Cat</span><span class=o>?</span>
        <span class=n>dispatch_sync</span><span class=p>(</span><span class=n>queue</span><span class=p>)</span> <span class=p>{</span> <span class=p>()</span> <span class=o>-&gt;</span> <span class=n>Void</span> <span class=k>in</span>
            <span class=k>if</span> <span class=k>let</span> <span class=n>clonedCat</span> <span class=o>=</span> <span class=nb>self</span><span class=p>.</span><span class=n>clonedCats</span><span class=p>[</span><span class=n>name</span><span class=p>]</span> <span class=p>{</span>
                <span class=n>cat</span> <span class=o>=</span> <span class=n>clonedCat</span>
                <span class=n>print</span><span class=p>(</span><span class=s>&quot;We already got \(name). No need to get remotely&quot;</span><span class=p>)</span>
            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
                <span class=n>guard</span> <span class=k>let</span> <span class=nl>url</span><span class=p>:</span> <span class=bp>NSURL</span> <span class=o>=</span> <span class=bp>NSURL</span><span class=p>(</span><span class=nl>string</span><span class=p>:</span><span class=n>url</span><span class=p>)</span> <span class=k>else</span> <span class=p>{</span> <span class=k>return</span> <span class=p>}</span>
                <span class=k>let</span> <span class=n>task</span> <span class=o>=</span> <span class=bp>NSURLSession</span><span class=p>.</span><span class=n>sharedSession</span><span class=p>().</span><span class=n>dataTaskWithURL</span><span class=p>(</span><span class=n>url</span><span class=p>)</span> <span class=p>{</span>
                    <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>_</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Void</span> <span class=k>in</span>
                     <span class=n>cat</span> <span class=o>=</span> <span class=n>Cat</span><span class=p>(</span><span class=nl>name</span><span class=p>:</span> <span class=n>name</span><span class=p>,</span> <span class=nl>image</span><span class=p>:</span> <span class=bp>UIImage</span><span class=p>(</span><span class=nl>data</span><span class=p>:</span> <span class=n>data</span><span class=o>!</span><span class=p>))</span>
                    <span class=nb>self</span><span class=p>.</span><span class=n>clonedCats</span><span class=p>[</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>cat</span>
                    <span class=n>print</span><span class=p>(</span><span class=s>&quot;Got \(name) from remote </span><span class=se>\n</span><span class=s>&quot;</span><span class=p>)</span>
                    <span class=n>dispatch_semaphore_signal</span><span class=p>(</span><span class=nb>self</span><span class=p>.</span><span class=n>semaphore</span><span class=p>)</span>
                <span class=p>}</span>
                <span class=n>task</span><span class=o>?</span><span class=p>.</span><span class=n>resume</span><span class=p>()</span>
                <span class=n>dispatch_semaphore_wait</span><span class=p>(</span><span class=nb>self</span><span class=p>.</span><span class=n>semaphore</span><span class=p>,</span> <span class=n>DISPATCH_TIME_FOREVER</span><span class=p>)</span>
            <span class=p>}</span>
        <span class=p>}</span>
        <span class=k>return</span> <span class=n>cat</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=k>let</span> <span class=n>cloneCatProxy</span> <span class=o>=</span> <span class=n>ClonedCatRequestProxy</span><span class=p>()</span>
<span class=k>let</span> <span class=n>catBebe</span> <span class=o>=</span> <span class=n>cloneCatProxy</span><span class=p>.</span><span class=n>getCat</span><span class=p>(</span><span class=n>Config</span><span class=p>.</span><span class=n>RandomCatURL</span><span class=p>,</span> <span class=nl>name</span><span class=p>:</span> <span class=s>&quot;Cat Bebe&quot;</span><span class=p>)</span>
<span class=k>let</span> <span class=n>catDodo</span> <span class=o>=</span> <span class=n>cloneCatProxy</span><span class=p>.</span><span class=n>getCat</span><span class=p>(</span><span class=n>Config</span><span class=p>.</span><span class=n>RandomCatURL</span><span class=p>,</span> <span class=nl>name</span><span class=p>:</span> <span class=s>&quot;Cat Dodo&quot;</span><span class=p>)</span>
<span class=k>let</span> <span class=n>catDidi</span> <span class=o>=</span> <span class=n>cloneCatProxy</span><span class=p>.</span><span class=n>getCat</span><span class=p>(</span><span class=n>Config</span><span class=p>.</span><span class=n>RandomCatURL</span><span class=p>,</span> <span class=nl>name</span><span class=p>:</span> <span class=s>&quot;Cat Didi&quot;</span><span class=p>)</span>

<span class=k>let</span> <span class=n>catDidiClone</span> <span class=o>=</span> <span class=n>cloneCatProxy</span><span class=p>.</span><span class=n>getCat</span><span class=p>(</span><span class=n>Config</span><span class=p>.</span><span class=n>RandomCatURL</span><span class=p>,</span> <span class=nl>name</span><span class=p>:</span> <span class=s>&quot;Cat Dodo&quot;</span><span class=p>)</span>
<span class=n>catBebe</span><span class=o>?</span><span class=p>.</span><span class=n>view</span>

<span class=n>catDodo</span><span class=o>?</span><span class=p>.</span><span class=n>view</span>
<span class=n>catDidiClone</span><span class=o>?</span><span class=p>.</span><span class=n>view</span>

<span class=n>catDidi</span><span class=o>?</span><span class=p>.</span><span class=n>view</span></code></pre></figure><p><img class="aligncenter size-full wp-image-1035" src=/assets/images/wp-content/uploads/2015/07/cached.png alt=cached width=774 height=874> The third one is Batch (Virtual) Cat Proxy. When people request cats, he simply writes down their requests and later fetch the cats from remote cat house in a big batch.</p><figure class=highlight><pre><code class=language-swift data-lang=swift><span class=k>protocol</span> <span class=n>BatchCatRequest</span> <span class=p>{</span>
    <span class=k>init</span><span class=p>(</span><span class=nl>url</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span> <span class=nl>numberOfCats</span><span class=p>:</span> <span class=n>Int</span><span class=p>)</span>
    <span class=k>func</span> <span class=n>getCat</span><span class=p>(</span><span class=nl>name</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span> <span class=nl>callback</span><span class=p>:</span> <span class=p>(</span><span class=nl>String</span><span class=p>:</span> <span class=n>Cat</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Void</span><span class=p>)</span>
    <span class=k>func</span> <span class=n>execute</span><span class=p>()</span>
<span class=p>}</span>

<span class=k>class</span> <span class=nl>BatchCatRequestProxy</span><span class=p>:</span> <span class=n>BatchCatRequest</span> <span class=p>{</span>
    <span class=k>let</span> <span class=nl>url</span><span class=p>:</span> <span class=n>String</span>
    <span class=k>var</span> <span class=nl>batchedCatRequest</span><span class=p>:[</span><span class=nl>String</span><span class=p>:</span> <span class=p>(</span><span class=n>Cat</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Void</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=o>:</span><span class=p>]</span>
    
    <span class=n>required</span> <span class=k>init</span><span class=p>(</span><span class=nl>url</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span> <span class=nl>numberOfCats</span><span class=p>:</span> <span class=n>Int</span> <span class=o>=</span> <span class=mi>1</span><span class=p>){</span>
        <span class=nb>self</span><span class=p>.</span><span class=n>url</span> <span class=o>=</span> <span class=n>url</span>
    <span class=p>}</span>
    <span class=k>func</span> <span class=n>getCat</span><span class=p>(</span><span class=nl>name</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span> <span class=nl>callback</span><span class=p>:</span> <span class=p>(</span><span class=nl>String</span><span class=p>:</span> <span class=n>Cat</span><span class=p>)</span>  <span class=o>-&gt;</span> <span class=n>Void</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>batchedCatRequest</span><span class=p>[</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>callback</span>
    <span class=p>}</span>
    <span class=k>func</span> <span class=n>execute</span><span class=p>()</span> <span class=p>{</span>
        <span class=n>guard</span> <span class=k>let</span> <span class=nl>url</span><span class=p>:</span> <span class=bp>NSURL</span> <span class=o>=</span> <span class=bp>NSURL</span><span class=p>(</span><span class=nl>string</span><span class=p>:</span><span class=n>url</span><span class=p>)</span> <span class=k>else</span> <span class=p>{</span> <span class=k>return</span> <span class=p>}</span>
        
        <span class=k>let</span> <span class=n>task</span> <span class=o>=</span> <span class=bp>NSURLSession</span><span class=p>.</span><span class=n>sharedSession</span><span class=p>().</span><span class=n>dataTaskWithURL</span><span class=p>(</span><span class=n>url</span><span class=p>)</span> <span class=p>{</span>
            <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>_</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Void</span> <span class=k>in</span>
            <span class=n>print</span><span class=p>(</span><span class=s>&quot;</span><span class=se>\n</span><span class=s> Trying to get \(self.batchedCatRequest.keys.array) from the BatchCatProxy&quot;</span><span class=p>)</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>callback</span><span class=p>)</span> <span class=k>in</span> <span class=nb>self</span><span class=p>.</span><span class=n>batchedCatRequest</span> <span class=p>{</span>
                <span class=k>let</span> <span class=n>cat</span> <span class=o>=</span> <span class=n>Cat</span><span class=p>(</span><span class=nl>name</span><span class=p>:</span> <span class=n>name</span><span class=p>,</span> <span class=nl>image</span><span class=p>:</span> <span class=bp>UIImage</span><span class=p>(</span><span class=nl>data</span><span class=p>:</span> <span class=n>data</span><span class=o>!</span><span class=p>))</span>
                <span class=n>callback</span><span class=p>(</span><span class=n>cat</span><span class=p>)</span>
                <span class=n>print</span><span class=p>(</span><span class=s>&quot;Got \(name) from remote </span><span class=se>\n</span><span class=s>&quot;</span><span class=p>)</span>
            <span class=p>}</span>
        <span class=p>}</span>
        <span class=n>task</span><span class=o>?</span><span class=p>.</span><span class=n>resume</span><span class=p>()</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=k>let</span> <span class=n>batchCatProxy</span> <span class=o>=</span> <span class=n>BatchCatRequestProxy</span><span class=p>(</span><span class=nl>url</span><span class=p>:</span> <span class=n>Config</span><span class=p>.</span><span class=n>RandomCatURL</span><span class=p>)</span>
<span class=n>batchCatProxy</span><span class=p>.</span><span class=n>getCat</span><span class=p>(</span><span class=s>&quot;Xixi1&quot;</span><span class=p>){</span>
    <span class=err>$</span><span class=mf>0.</span><span class=n>view</span>
    
<span class=p>}</span>

<span class=n>batchCatProxy</span><span class=p>.</span><span class=n>getCat</span><span class=p>(</span><span class=s>&quot;DongDong1&quot;</span><span class=p>)</span> <span class=p>{</span> <span class=p>(</span><span class=n>cat</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Void</span> <span class=k>in</span>
    <span class=n>cat</span><span class=p>.</span><span class=n>view</span><span class=o>!</span>
<span class=p>}</span>
<span class=n>batchCatProxy</span><span class=p>.</span><span class=n>execute</span><span class=p>()</span></code></pre></figure><p><a href=/assets/images/wp-content/uploads/2015/07/batchProxydefer.png><img class="aligncenter size-full wp-image-1034" src=/assets/images/wp-content/uploads/2015/07/batchProxydefer.png alt=batchProxy(defer) width=778 height=1066></a></p><p>The first Batch Cat Proxy always retrieves the same cats remotely but people want different cats. So they go to the batch unique cat proxy, who keeps a number of different options of cats.</p><figure class=highlight><pre><code class=language-swift data-lang=swift><span class=k>class</span> <span class=nl>BatchUniqueCatRequestProxy</span><span class=p>:</span> <span class=n>BatchCatRequest</span> <span class=p>{</span>
    <span class=k>var</span> <span class=nl>catURLs</span><span class=p>:[</span><span class=n>String</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>var</span> <span class=nl>batchedCatRequest</span><span class=p>:[</span><span class=nl>String</span><span class=p>:</span> <span class=p>(</span><span class=n>Cat</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Void</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=o>:</span><span class=p>]</span>
    
    <span class=n>required</span> <span class=k>init</span><span class=p>(</span><span class=nl>url</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span> <span class=nl>numberOfCats</span><span class=p>:</span> <span class=n>Int</span><span class=p>){</span>
        <span class=k>let</span> <span class=n>fullURL</span> <span class=o>=</span> <span class=s>&quot;\(url)\(numberOfCats)&quot;</span>
        <span class=nb>self</span><span class=p>.</span><span class=n>catURLs</span> <span class=o>=</span> <span class=n>getCatURLs</span><span class=p>(</span><span class=n>fullURL</span><span class=p>)</span>
    <span class=p>}</span>
    <span class=k>func</span> <span class=n>getCat</span><span class=p>(</span><span class=nl>name</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span> <span class=nl>callback</span><span class=p>:</span> <span class=p>(</span><span class=nl>String</span><span class=p>:</span> <span class=n>Cat</span><span class=p>)</span>  <span class=o>-&gt;</span> <span class=n>Void</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>batchedCatRequest</span><span class=p>[</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>callback</span>
    <span class=p>}</span>
    <span class=k>func</span> <span class=n>execute</span><span class=p>()</span> <span class=p>{</span>
        <span class=k>if</span> <span class=n>catURLs</span><span class=p>.</span><span class=n>count</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>batchedCatRequest</span><span class=p>.</span><span class=n>count</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>catURLs</span><span class=p>.</span><span class=n>count</span> <span class=o>&gt;</span> <span class=n>batchedCatRequest</span><span class=p>.</span><span class=n>count</span> <span class=p>{</span>
            <span class=k>var</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span>
             <span class=n>print</span><span class=p>(</span><span class=s>&quot;</span><span class=se>\n</span><span class=s> Trying to get \(self.batchedCatRequest.keys.array) from the BatchUniqueCatProxy&quot;</span><span class=p>)</span>
            <span class=k>for</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>callback</span><span class=p>)</span> <span class=k>in</span> <span class=nb>self</span><span class=p>.</span><span class=n>batchedCatRequest</span> <span class=p>{</span>
                <span class=n>guard</span> <span class=k>let</span> <span class=nl>url</span><span class=p>:</span> <span class=bp>NSURL</span> <span class=o>=</span> <span class=bp>NSURL</span><span class=p>(</span><span class=nl>string</span><span class=p>:</span><span class=nb>self</span><span class=p>.</span><span class=n>catURLs</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=k>else</span> <span class=p>{</span> <span class=k>return</span> <span class=p>}</span>
                <span class=n>print</span><span class=p>(</span><span class=s>&quot;&quot;</span><span class=p>)</span>
                <span class=k>let</span> <span class=n>task</span> <span class=o>=</span> <span class=bp>NSURLSession</span><span class=p>.</span><span class=n>sharedSession</span><span class=p>().</span><span class=n>dataTaskWithURL</span><span class=p>(</span><span class=n>url</span><span class=p>)</span> <span class=p>{</span>
                    <span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>_</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Void</span> <span class=k>in</span>
                    <span class=k>let</span> <span class=n>cat</span> <span class=o>=</span> <span class=n>Cat</span><span class=p>(</span><span class=nl>name</span><span class=p>:</span> <span class=n>name</span><span class=p>,</span> <span class=nl>image</span><span class=p>:</span> <span class=bp>UIImage</span><span class=p>(</span><span class=nl>data</span><span class=p>:</span> <span class=n>data</span><span class=o>!</span><span class=p>))</span>
                    <span class=n>print</span><span class=p>(</span><span class=s>&quot;Got \(name) from remote </span><span class=se>\n</span><span class=s>&quot;</span><span class=p>)</span>
                    <span class=n>callback</span><span class=p>(</span><span class=n>cat</span><span class=p>)</span>
                <span class=p>}</span>
                <span class=n>i</span><span class=o>++</span>
                <span class=n>task</span><span class=o>?</span><span class=p>.</span><span class=n>resume</span><span class=p>()</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=p>}</span>
    
    <span class=n>private</span> <span class=k>func</span> <span class=n>getCatURLs</span><span class=p>(</span><span class=nl>url</span><span class=p>:</span> <span class=n>String</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=p>[</span><span class=n>String</span><span class=p>]</span> <span class=p>{</span>
        <span class=k>var</span> <span class=nl>urls</span><span class=p>:[</span><span class=n>String</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>do</span> <span class=p>{</span>
            <span class=k>let</span> <span class=n>str</span> <span class=o>=</span> <span class=n>try</span> <span class=n>String</span><span class=p>(</span><span class=nl>contentsOfURL</span><span class=p>:</span> <span class=bp>NSURL</span><span class=p>(</span><span class=nl>string</span><span class=p>:</span> <span class=n>url</span><span class=p>)</span><span class=o>!</span><span class=p>,</span> <span class=nl>encoding</span><span class=p>:</span> <span class=n>NSUTF8StringEncoding</span><span class=p>)</span>
            <span class=k>let</span> <span class=n>xml1</span> <span class=o>=</span> <span class=n>SWXMLHash</span><span class=p>.</span><span class=n>parse</span><span class=p>(</span><span class=n>str</span><span class=p>)</span>
            <span class=k>let</span> <span class=n>images</span> <span class=o>=</span> <span class=n>xml1</span><span class=p>[</span><span class=s>&quot;response&quot;</span><span class=p>][</span><span class=s>&quot;data&quot;</span><span class=p>][</span><span class=s>&quot;images&quot;</span><span class=p>][</span><span class=s>&quot;image&quot;</span><span class=p>].</span><span class=n>all</span>
            
            <span class=k>for</span> <span class=n>image</span> <span class=k>in</span> <span class=n>images</span> <span class=p>{</span>
                <span class=k>if</span> <span class=k>let</span> <span class=nl>str</span><span class=p>:</span><span class=n>String</span> <span class=o>=</span> <span class=n>image</span><span class=p>[</span><span class=s>&quot;url&quot;</span><span class=p>].</span><span class=n>element</span><span class=o>?</span><span class=p>.</span><span class=n>text</span> <span class=p>{</span>
                    <span class=k>let</span> <span class=n>url</span> <span class=o>=</span> <span class=n>str</span><span class=p>.</span><span class=n>stringByReplacingOccurrencesOfString</span><span class=p>(</span><span class=s>&quot;</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=nl>withString</span><span class=p>:</span> <span class=s>&quot;&quot;</span><span class=p>).</span><span class=n>stringByReplacingOccurrencesOfString</span><span class=p>(</span><span class=s>&quot; &quot;</span><span class=p>,</span> <span class=nl>withString</span><span class=p>:</span> <span class=s>&quot;&quot;</span><span class=p>)</span>
                    <span class=n>urls</span><span class=p>.</span><span class=n>append</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
                <span class=p>}</span>
            <span class=p>}</span>
        <span class=p>}</span> <span class=n>catch</span> <span class=p>{</span>
            <span class=n>print</span><span class=p>(</span><span class=s>&quot;error getting the cat urls &quot;</span><span class=p>)</span>
        <span class=p>}</span>
         <span class=k>return</span> <span class=n>urls</span>
    <span class=p>}</span>
<span class=p>}</span></code></pre></figure><p><a href=/assets/images/wp-content/uploads/2015/07/batchUnique.png><img class="aligncenter size-full wp-image-1031" src=/assets/images/wp-content/uploads/2015/07/batchUnique.png alt=batchUnique width=895 height=676></a></p><p>The last one is the Secure(Protection) Proxy.  He is always quite serious and have to check everybody&#8217;s &#8220;passcode&#8221; before giving them any cats.</p><figure class=highlight><pre><code class=language-swift data-lang=swift><span class=k>class</span> <span class=n>UserAuthentication</span> <span class=p>{</span>
    <span class=k>var</span> <span class=nl>user</span><span class=p>:</span><span class=n>String</span><span class=o>?</span><span class=p>;</span>
    <span class=k>var</span> <span class=nl>authenticated</span><span class=p>:</span><span class=n>Bool</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
    
    <span class=n>private</span> <span class=nf>init</span><span class=p>()</span> <span class=p>{</span>
        <span class=c1>// do nothing - stops instances being created</span>
    <span class=p>}</span>
    
    <span class=k>func</span> <span class=nf>authenticate</span><span class=p>(</span><span class=nl>user</span><span class=p>:</span><span class=n>String</span><span class=p>,</span> <span class=nl>pass</span><span class=p>:</span><span class=n>String</span><span class=p>)</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>pass</span> <span class=o>==</span> <span class=s>&quot;secret&quot;</span><span class=p>)</span> <span class=p>{</span>
            <span class=nb>self</span><span class=p>.</span><span class=n>user</span> <span class=o>=</span> <span class=n>user</span><span class=p>;</span>
            <span class=nb>self</span><span class=p>.</span><span class=n>authenticated</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
            <span class=n>print</span><span class=p>(</span><span class=s>&quot;user authenticated&quot;</span><span class=p>)</span>
        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
            <span class=nb>self</span><span class=p>.</span><span class=n>user</span> <span class=o>=</span> <span class=nb>nil</span><span class=p>;</span>
            <span class=nb>self</span><span class=p>.</span><span class=n>authenticated</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
            <span class=n>print</span><span class=p>(</span><span class=s>&quot;user not authenticated&quot;</span><span class=p>)</span>
        <span class=p>}</span>
    <span class=p>}</span>
    
   <span class=k>static</span> <span class=k>let</span> <span class=nl>sharedInstance</span><span class=p>:</span> <span class=n>UserAuthentication</span> <span class=o>=</span> <span class=n>UserAuthentication</span><span class=p>()</span>
<span class=p>}</span>
<span class=c1>//:ControlAccessProxy </span>
<span class=k>class</span> <span class=nl>SecuredCatRequestProxy</span><span class=p>:</span> <span class=n>BatchCatRequest</span> <span class=p>{</span>
    <span class=n>private</span> <span class=k>let</span> <span class=nl>wrapperObject</span><span class=p>:</span> <span class=n>BatchCatRequest</span>
    <span class=n>required</span> <span class=k>init</span><span class=p>(</span><span class=nl>url</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span> <span class=nl>numberOfCats</span><span class=p>:</span> <span class=n>Int</span> <span class=o>=</span> <span class=mi>1</span><span class=p>){</span>
        <span class=n>wrapperObject</span> <span class=o>=</span> <span class=n>BatchCatRequestProxy</span><span class=p>(</span><span class=nl>url</span><span class=p>:</span> <span class=n>url</span><span class=p>)</span>
    <span class=p>}</span>
    <span class=k>func</span> <span class=n>getCat</span><span class=p>(</span><span class=nl>name</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span> <span class=nl>callback</span><span class=p>:</span> <span class=p>(</span><span class=nl>String</span><span class=p>:</span> <span class=n>Cat</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Void</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>wrapperObject</span><span class=p>.</span><span class=n>getCat</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=nl>callback</span><span class=p>:</span> <span class=n>callback</span><span class=p>)</span>
    <span class=p>}</span>
    <span class=k>func</span> <span class=n>execute</span><span class=p>()</span> <span class=p>{</span>
        <span class=k>if</span> <span class=n>UserAuthentication</span><span class=p>.</span><span class=n>sharedInstance</span><span class=p>.</span><span class=n>authenticated</span> <span class=p>{</span>
            <span class=n>wrapperObject</span><span class=p>.</span><span class=n>execute</span><span class=p>()</span>
        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
            <span class=n>print</span><span class=p>(</span><span class=s>&quot;Can&#39;t get cat if you are not authorized&quot;</span><span class=p>)</span>
            <span class=n>fatalError</span><span class=p>(</span><span class=s>&quot;Can&#39;t get cat if you are not authorized&quot;</span><span class=p>)</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>



<span class=k>let</span> <span class=n>secureProxy</span> <span class=o>=</span> <span class=n>SecuredCatRequestProxy</span><span class=p>(</span><span class=nl>url</span><span class=p>:</span> <span class=n>Config</span><span class=p>.</span><span class=n>RandomCatURL</span><span class=p>)</span>
<span class=n>secureProxy</span><span class=p>.</span><span class=n>getCat</span><span class=p>(</span><span class=s>&quot;XixiSecure&quot;</span><span class=p>){</span>
    <span class=err>$</span><span class=mf>0.</span><span class=n>view</span>
<span class=p>}</span>

<span class=n>UserAuthentication</span><span class=p>.</span><span class=n>sharedInstance</span><span class=p>.</span><span class=n>authenticate</span><span class=p>(</span><span class=s>&quot;Jane&quot;</span><span class=p>,</span> <span class=nl>pass</span><span class=p>:</span> <span class=s>&quot;secret&quot;</span><span class=p>)</span>
<span class=n>secureProxy</span><span class=p>.</span><span class=n>execute</span><span class=p>()</span></code></pre></figure><p><a href=/assets/images/wp-content/uploads/2015/07/secure.png><img class="aligncenter size-full wp-image-1032" src=/assets/images/wp-content/uploads/2015/07/secure.png alt=secure width=848 height=595></a></p><p>The rest of the code:</p><figure class=highlight><pre><code class=language-swift data-lang=swift><span class=k>import</span> <span class=n>Foundation</span>
<span class=k>import</span> <span class=n>UIKit</span>
<span class=k>import</span> <span class=n>XCPlayground</span>
<span class=n>XCPSetExecutionShouldContinueIndefinitely</span><span class=p>(</span><span class=nb>true</span><span class=p>)</span>

<span class=k>func</span> <span class=n>getCat</span><span class=p>(</span><span class=nl>state</span><span class=p>:</span><span class=n>CatNames</span><span class=p>,</span> <span class=nl>caption</span><span class=p>:</span> <span class=n>String</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=bp>UIView</span><span class=p>{</span>
    <span class=k>let</span> <span class=n>image</span> <span class=o>=</span> <span class=bp>UIImage</span><span class=p>(</span><span class=nl>named</span><span class=p>:</span> <span class=n>state</span><span class=p>.</span><span class=n>rawValue</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>getCatView</span><span class=p>(</span><span class=n>image</span><span class=o>!</span><span class=p>,</span> <span class=nl>caption</span><span class=p>:</span> <span class=n>caption</span><span class=p>)</span>
<span class=p>}</span>
<span class=k>func</span> <span class=n>getCatView</span><span class=p>(</span><span class=nl>image</span><span class=p>:</span> <span class=bp>UIImage</span><span class=p>,</span> <span class=nl>caption</span><span class=p>:</span> <span class=n>String</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=bp>UIView</span> <span class=p>{</span>
    <span class=k>let</span> <span class=n>view</span> <span class=o>=</span> <span class=bp>UIView</span><span class=p>(</span><span class=nl>frame</span><span class=p>:</span> <span class=n>CGRectMake</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>400</span><span class=p>,</span> <span class=mi>300</span><span class=p>))</span>
    <span class=n>view</span><span class=p>.</span><span class=n>clipsToBounds</span> <span class=o>=</span> <span class=nb>true</span>
    <span class=k>let</span> <span class=n>labelView</span> <span class=o>=</span> <span class=bp>UILabel</span><span class=p>(</span><span class=nl>frame</span><span class=p>:</span> <span class=n>CGRectMake</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>400</span><span class=p>,</span> <span class=mi>100</span><span class=p>))</span>
    <span class=n>labelView</span><span class=p>.</span><span class=n>text</span> <span class=o>=</span> <span class=n>caption</span>
    <span class=n>labelView</span><span class=p>.</span><span class=n>numberOfLines</span> <span class=o>=</span> <span class=mi>0</span>
    <span class=n>labelView</span><span class=p>.</span><span class=n>lineBreakMode</span> <span class=o>=</span> <span class=n>NSLineBreakMode</span><span class=p>.</span><span class=n>ByWordWrapping</span>
    <span class=n>labelView</span><span class=p>.</span><span class=n>font</span> <span class=o>=</span> <span class=n>labelView</span><span class=p>.</span><span class=n>font</span><span class=p>.</span><span class=n>fontWithSize</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span>
    <span class=n>labelView</span><span class=p>.</span><span class=n>textColor</span> <span class=o>=</span> <span class=bp>UIColor</span><span class=p>.</span><span class=n>redColor</span><span class=p>()</span>
    <span class=n>labelView</span><span class=p>.</span><span class=n>textAlignment</span> <span class=o>=</span> <span class=n>NSTextAlignment</span><span class=p>.</span><span class=n>Center</span>
    <span class=k>let</span> <span class=n>imageView</span> <span class=o>=</span> <span class=bp>UIImageView</span><span class=p>(</span><span class=nl>image</span><span class=p>:</span> <span class=n>image</span><span class=p>)</span>
    <span class=n>imageView</span><span class=p>.</span><span class=n>frame</span> <span class=o>=</span> <span class=n>view</span><span class=p>.</span><span class=n>frame</span>
    <span class=n>imageView</span><span class=p>.</span><span class=n>contentMode</span> <span class=o>=</span> <span class=n>UIViewContentMode</span><span class=p>.</span><span class=n>ScaleAspectFit</span>
    <span class=n>view</span><span class=p>.</span><span class=n>addSubview</span><span class=p>(</span><span class=n>imageView</span><span class=p>)</span>
    <span class=n>view</span><span class=p>.</span><span class=n>addSubview</span><span class=p>(</span><span class=n>labelView</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>view</span>
    
<span class=p>}</span>

<span class=k>struct</span> <span class=nl>Cat</span><span class=p>:</span><span class=n>CustomStringConvertible</span> <span class=p>{</span>
    <span class=k>let</span> <span class=nl>name</span><span class=p>:</span> <span class=n>String</span>
    <span class=k>var</span> <span class=nl>image</span><span class=p>:</span> <span class=bp>UIImage</span><span class=o>?</span>
    <span class=k>var</span> <span class=nl>description</span><span class=p>:</span> <span class=n>String</span> <span class=p>{</span>
        <span class=k>let</span> <span class=n>str</span> <span class=o>=</span> <span class=n>image</span> <span class=o>==</span> <span class=nb>nil</span> <span class=o>?</span> <span class=s>&quot;Still requesting&quot;</span> <span class=o>:</span> <span class=s>&quot;Got it&quot;</span>
        <span class=k>return</span> <span class=s>&quot;\(name) (\(str))&quot;</span>
    <span class=p>}</span>
    <span class=k>var</span> <span class=nl>view</span><span class=p>:</span> <span class=bp>UIView</span><span class=o>?</span> <span class=p>{</span>
        <span class=k>let</span> <span class=n>tempImage</span> <span class=o>=</span> <span class=n>image</span> <span class=o>??</span> <span class=bp>UIImage</span><span class=p>(</span><span class=nl>named</span><span class=p>:</span> <span class=s>&quot;catPlaceholder.jpg&quot;</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>getCatView</span><span class=p>(</span><span class=n>tempImage</span><span class=o>!</span><span class=p>,</span> <span class=nl>caption</span><span class=p>:</span> <span class=n>name</span><span class=p>)</span>
    <span class=p>}</span>
<span class=p>}</span>
<span class=k>struct</span> <span class=n>Config</span><span class=p>{</span>
    <span class=k>static</span> <span class=k>let</span> <span class=n>RandomCatURL</span> <span class=o>=</span> <span class=s>&quot;http://thecatapi.com/api/images/get?format=src&amp;type=gif&quot;</span>
    <span class=k>static</span> <span class=k>let</span> <span class=n>RandomCatGroupURLPrefix</span> <span class=o>=</span> <span class=s>&quot;http://thecatapi.com/api/images/get?format=xml&amp;results_per_page=&quot;</span>
<span class=p>}</span>
<span class=k>enum</span> <span class=nl>CatNames</span><span class=p>:</span><span class=n>String</span> <span class=p>{</span>
    <span class=k>case</span> <span class=n>Bored</span> <span class=o>=</span> <span class=s>&quot;bored.jpg&quot;</span>
    <span class=k>case</span> <span class=n>Happy</span> <span class=o>=</span> <span class=s>&quot;happy.jpg&quot;</span>
    <span class=k>case</span> <span class=n>PlaceHolder</span> <span class=o>=</span> <span class=s>&quot;catPlaceholder.jpg&quot;</span>
<span class=p>}</span></code></pre></figure><p>&nbsp;</p><p>&nbsp;</p><blockquote><p>The proxy pattern is used to provide a surrogate or placeholder object, which references an underlying object. The proxy provides the same public interface as the underlying subject class, adding a level of indirection by accepting requests from a client object and passing these to the real subject object as necessary. &#8212; <strong><em>Gang Of Four</em> </strong></p></blockquote><p>More info:</p><blockquote><p><strong>Remote Proxy</strong> – Represents an object locally which belongs to a different address space. Think of an ATM implementation, it will hold proxy objects for bank information that exists in the remote server.</p><p><strong>Virtual Proxy</strong> – In place of a complex or heavy object, use a skeleton representation. When an underlying image is huge in size, just represent it using a virtual proxy object and on demand load the real object. You know that the real object is expensive in terms of instantiation and so without the real need we are not going to use the real object. Until the need arises we will use the virtual proxy.</p><p><strong>Protection Proxy</strong> – Are you working on an MNC? If so, we might be well aware of the proxy server that provides us internet by restricting access to some sort of websites like public e-mail, social networking, data storage etc. The management feels that, it is better to block some content and provide only work related web pages. Proxy server does that job. This is a type of proxy design pattern. &#8212; <em>Wiki</em></p></blockquote><p>Ref: <a href=www.apress.com/9781484203958>Design Pattern in Swift</a><br>Cat API: <a href=http://thecatapi.com/ >http://thecatapi.com/</a></p></div><div class=card><div class=page-nav><div><a class=prev href=/2015/07/05/a-design-pattern-story-in-swift-chapter-11-state/ ><i class="fa fa-angle-left"></i></a> <a class=prev href=/2015/07/05/a-design-pattern-story-in-swift-chapter-11-state/ >A Design Pattern Story in Swift – Chapter 11: State</a></div><div><a class=next href=/2015/07/08/a-design-pattern-story-in-swift-chapter-13-builder/ >A Design Pattern Story in Swift – Chapter 13: Builder </a><a class=prev href=/2015/07/08/a-design-pattern-story-in-swift-chapter-13-builder/ ><i class="fa fa-angle-right"></i></a></div></div></div><div class="related card"><h2>Related Posts</h2><ul class=related-posts><li><h4><a href=/general/2015/11/11/singles-day/ >Singles Day <small>11 Nov 2015</small></a></h4></li><li><h4><a href=/jekyll/2015/09/27/relocating-my-blog-from-wordpress-to-Jekyll/ >Relocating My Blog from Wordpress to Jekyll <small>27 Sep 2015</small></a></h4></li><li><h4><a href=/2015/07/18/a-design-pattern-story-in-swift-chapter-21-interpretor/ >A Design Pattern Story in Swift – Chapter 21: Interpretor <small>18 Jul 2015</small></a></h4></li></ul></div><div class=card><div id=disqus_thread></div><script type=text/javascript>var disqus_shortname = 'audreyli';
    
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript></div></div></div></main><footer class=row><div class="col-md-8 col-md-offset-2 text-center"><a href=http://audreyli.me>&copy; Copyright 2015 &nbsp; &nbsp; AudreyLi.me &nbsp; &nbsp;</a> <a href=/archives>Archives &nbsp; &nbsp; </a><a href=https://github.com/vidaaudrey title="Audrey's Github"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span></a><a href=https://www.linkedin.com/in/audreyauli title="Audrey's Google Plus"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span></a><a href=/feed.xml title="RSS Feed"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i></span></a></div></footer><script src=https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js></script><script src=https://cdn.rawgit.com/twbs/bootstrap/v4-dev/dist/js/bootstrap.js></script><script src=/assets/javascript/index.js></script></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-68084914-1', 'auto');
    ga('send', 'pageview');</script></body></html>